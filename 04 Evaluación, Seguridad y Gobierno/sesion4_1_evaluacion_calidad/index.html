
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../03%20Herramientas%20y%20Datos%20Estructurados/sesion3_3_datos_estructurados_y_agente_datos/">
      
      
        <link rel="next" href="../sesion4_2_evaluacion_en_copilot_studio/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Sesión 4.1 — Evaluación de calidad en sistemas RAG - RAG con Copilot Studio</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sesion-41-evaluacion-de-calidad-en-sistemas-rag" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="RAG con Copilot Studio" class="md-header__button md-logo" aria-label="RAG con Copilot Studio" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RAG con Copilot Studio
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Sesión 4.1 — Evaluación de calidad en sistemas RAG
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pestañas" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Seminario: RAG y Copilot Studio

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../01%20Fundamentos%20RAG/sesion1_1_arquitectura_rag_entorno_empresarial/" class="md-tabs__link">
          
  
  
  01 Fundamentos RAG

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../02%20Origenes%20Conocimiento/sesion2_1_origenes_soportados_y_tratamiento/" class="md-tabs__link">
          
  
  
  02 Origenes Conocimiento

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../03%20Herramientas%20y%20Datos%20Estructurados/sesion3_1_cuando_rag_no_es_suficiente/" class="md-tabs__link">
          
  
  
  03 Herramientas y Datos Estructurados

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  04 Evaluación, Seguridad y Gobierno

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../99%20Laboratorios/00%20indice/" class="md-tabs__link">
          
  
  
  99 Laboratorios

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="RAG con Copilot Studio" class="md-nav__button md-logo" aria-label="RAG con Copilot Studio" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    RAG con Copilot Studio
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Seminario: RAG y Copilot Studio
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    01 Fundamentos RAG
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    01 Fundamentos RAG
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01%20Fundamentos%20RAG/sesion1_1_arquitectura_rag_entorno_empresarial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 1.1 — Arquitectura RAG en entorno empresarial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01%20Fundamentos%20RAG/sesion1_2_proceso_indexacion_documental/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 1.2 — Proceso de indexación documental
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01%20Fundamentos%20RAG/sesion1_3_embeddings_y_recuperacion_semantica/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 1.3 — Embeddings y recuperación semántica
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    02 Origenes Conocimiento
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    02 Origenes Conocimiento
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02%20Origenes%20Conocimiento/sesion2_1_origenes_soportados_y_tratamiento/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SESIÓN 2.1 — Orígenes soportados y su tratamiento en Copilot Studio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02%20Origenes%20Conocimiento/sesion2_2_diferencias_operativas_clave/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SESIÓN 2.2 — Diferencias operativas clave
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02%20Origenes%20Conocimiento/sesion2_3_factores_calidad_recuperacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SESIÓN 2.3 — Factores que influyen en la calidad del sistema
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    03 Herramientas y Datos Estructurados
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    03 Herramientas y Datos Estructurados
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03%20Herramientas%20y%20Datos%20Estructurados/sesion3_1_cuando_rag_no_es_suficiente/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 3.1 — Cuándo RAG no es suficiente
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03%20Herramientas%20y%20Datos%20Estructurados/sesion3_2_uso_herramientas_copilot_studio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 3.2 — Uso de herramientas en Copilot Studio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03%20Herramientas%20y%20Datos%20Estructurados/sesion3_3_datos_estructurados_y_agente_datos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 3.3 — Datos estructurados y “agentes de datos”
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    04 Evaluación, Seguridad y Gobierno
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    04 Evaluación, Seguridad y Gobierno
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Sesión 4.1 — Evaluación de calidad en sistemas RAG
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 4.1 — Evaluación de calidad en sistemas RAG
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-objetivos-de-aprendizaje" class="md-nav__link">
    <span class="md-ellipsis">
      
        1) Objetivos de aprendizaje
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-la-idea-clave-evaluar-dos-sistemas-no-uno" class="md-nav__link">
    <span class="md-ellipsis">
      
        2) La idea clave: evaluar dos sistemas, no uno
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-evaluacion-de-recuperacion-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      
        3) Evaluación de recuperación (retrieval)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3) Evaluación de recuperación (retrieval)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-que-significa-recuperar-bien" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 ¿Qué significa “recuperar bien”?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-metricas-clasicas-adaptadas-a-rag" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Métricas clásicas (adaptadas a RAG)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Métricas clásicas (adaptadas a RAG)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-precisionk" class="md-nav__link">
    <span class="md-ellipsis">
      
        A) Precision@k
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-recallk" class="md-nav__link">
    <span class="md-ellipsis">
      
        B) Recall@k
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-hitratek-muy-practica" class="md-nav__link">
    <span class="md-ellipsis">
      
        C) Hit‑rate@k (muy práctica)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-mrr-mean-reciprocal-rank" class="md-nav__link">
    <span class="md-ellipsis">
      
        D) MRR (Mean Reciprocal Rank)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-que-necesitas-para-medir-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Qué necesitas para medir retrieval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-patrones-de-fallo-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 Patrones de fallo (retrieval)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-evaluacion-de-respuesta-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4) Evaluación de respuesta (generation)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4) Evaluación de respuesta (generation)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-criterios-de-calidad-que-necesitas-mirar" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Criterios de calidad que necesitas mirar
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 Criterios de calidad que necesitas mirar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-relevancia" class="md-nav__link">
    <span class="md-ellipsis">
      
        A) Relevancia
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-groundedness-fundamentacion" class="md-nav__link">
    <span class="md-ellipsis">
      
        B) Groundedness (fundamentación)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-completitud" class="md-nav__link">
    <span class="md-ellipsis">
      
        C) Completitud
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-abstencion-adecuada" class="md-nav__link">
    <span class="md-ellipsis">
      
        D) Abstención adecuada
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-como-medir-groundedness-de-forma-practica-sin-ciencia-ficcion" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Cómo medir groundedness de forma práctica (sin ciencia ficción)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-que-necesitas-para-medir-respuesta" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Qué necesitas para medir respuesta
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-importancia-de-datasets-de-prueba-test-sets" class="md-nav__link">
    <span class="md-ellipsis">
      
        5) Importancia de datasets de prueba (test sets)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5) Importancia de datasets de prueba (test sets)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-por-que-un-dataset-cambia-el-juego" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Por qué un “dataset” cambia el juego
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-que-debe-contener-un-buen-test-set-minimo-viable" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Qué debe contener un buen test set (mínimo viable)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-como-mantener-el-dataset-operacion-real" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Cómo mantener el dataset (operación real)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-miniejercicio-5-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        6) Mini‑ejercicio (5 min)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6) Mini‑ejercicio (5 min)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consigna" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consigna
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plantilla" class="md-nav__link">
    <span class="md-ellipsis">
      
        Plantilla
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-notas-del-instructor" class="md-nav__link">
    <span class="md-ellipsis">
      
        7) Notas del instructor
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-lectura-opcional-oficial" class="md-nav__link">
    <span class="md-ellipsis">
      
        8) Lectura opcional (oficial)
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sesion4_2_evaluacion_en_copilot_studio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 4.2 — Evaluación en Copilot Studio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sesion4_3_seguridad_y_gobierno/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 4.3 — Seguridad y control empresarial en un sistema RAG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sesion4_4_citaciones_y_trazabilidad/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sesión 4.4 — Citaciones y trazabilidad en RAG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    99 Laboratorios
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    99 Laboratorios
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../99%20Laboratorios/00%20indice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caso FraSoHome — Laboratorios (Copilot Studio + RAG + Dataverse)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../99%20Laboratorios/LAB2_Base_de_conocimiento_RAG_en_Copilot_Studio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LAB 2 — Base de conocimiento (RAG) en Copilot Studio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../99%20Laboratorios/LAB3_Prompting_Citaciones_y_Control_de_Fallback/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LAB 3 — Prompting, citaciones y seguridad (control de versionado + prompt injection)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../99%20Laboratorios/LAB4_Dataverse_y_Datos_Estructurados/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LAB 4 — Dataverse: crear tablas e importar datos estructurados (CSV)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../99%20Laboratorios/LAB5_Arquitectura_Hibrida_Tools_y_RAG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LAB 5 — Arquitectura híbrida: Tools (Dataverse) + RAG (documentos)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../99%20Laboratorios/LAB6_Evaluacion_Seguridad_y_Gobierno/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LAB 6 — Evaluación, seguridad y gobierno del asistente
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-objetivos-de-aprendizaje" class="md-nav__link">
    <span class="md-ellipsis">
      
        1) Objetivos de aprendizaje
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-la-idea-clave-evaluar-dos-sistemas-no-uno" class="md-nav__link">
    <span class="md-ellipsis">
      
        2) La idea clave: evaluar dos sistemas, no uno
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-evaluacion-de-recuperacion-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      
        3) Evaluación de recuperación (retrieval)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3) Evaluación de recuperación (retrieval)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-que-significa-recuperar-bien" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 ¿Qué significa “recuperar bien”?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-metricas-clasicas-adaptadas-a-rag" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Métricas clásicas (adaptadas a RAG)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 Métricas clásicas (adaptadas a RAG)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-precisionk" class="md-nav__link">
    <span class="md-ellipsis">
      
        A) Precision@k
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-recallk" class="md-nav__link">
    <span class="md-ellipsis">
      
        B) Recall@k
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-hitratek-muy-practica" class="md-nav__link">
    <span class="md-ellipsis">
      
        C) Hit‑rate@k (muy práctica)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-mrr-mean-reciprocal-rank" class="md-nav__link">
    <span class="md-ellipsis">
      
        D) MRR (Mean Reciprocal Rank)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-que-necesitas-para-medir-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Qué necesitas para medir retrieval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-patrones-de-fallo-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 Patrones de fallo (retrieval)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-evaluacion-de-respuesta-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4) Evaluación de respuesta (generation)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4) Evaluación de respuesta (generation)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-criterios-de-calidad-que-necesitas-mirar" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Criterios de calidad que necesitas mirar
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 Criterios de calidad que necesitas mirar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-relevancia" class="md-nav__link">
    <span class="md-ellipsis">
      
        A) Relevancia
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-groundedness-fundamentacion" class="md-nav__link">
    <span class="md-ellipsis">
      
        B) Groundedness (fundamentación)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-completitud" class="md-nav__link">
    <span class="md-ellipsis">
      
        C) Completitud
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-abstencion-adecuada" class="md-nav__link">
    <span class="md-ellipsis">
      
        D) Abstención adecuada
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-como-medir-groundedness-de-forma-practica-sin-ciencia-ficcion" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Cómo medir groundedness de forma práctica (sin ciencia ficción)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-que-necesitas-para-medir-respuesta" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Qué necesitas para medir respuesta
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-importancia-de-datasets-de-prueba-test-sets" class="md-nav__link">
    <span class="md-ellipsis">
      
        5) Importancia de datasets de prueba (test sets)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5) Importancia de datasets de prueba (test sets)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-por-que-un-dataset-cambia-el-juego" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Por qué un “dataset” cambia el juego
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-que-debe-contener-un-buen-test-set-minimo-viable" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Qué debe contener un buen test set (mínimo viable)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-como-mantener-el-dataset-operacion-real" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Cómo mantener el dataset (operación real)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-miniejercicio-5-min" class="md-nav__link">
    <span class="md-ellipsis">
      
        6) Mini‑ejercicio (5 min)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6) Mini‑ejercicio (5 min)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consigna" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consigna
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plantilla" class="md-nav__link">
    <span class="md-ellipsis">
      
        Plantilla
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-notas-del-instructor" class="md-nav__link">
    <span class="md-ellipsis">
      
        7) Notas del instructor
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-lectura-opcional-oficial" class="md-nav__link">
    <span class="md-ellipsis">
      
        8) Lectura opcional (oficial)
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navegación" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Seminario: RAG y Copilot Studio
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="./" class="md-path__link">
          
  <span class="md-ellipsis">
    04 Evaluación, Seguridad y Gobierno
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="sesion-41-evaluacion-de-calidad-en-sistemas-rag">Sesión 4.1 — Evaluación de calidad en sistemas RAG<a class="headerlink" href="#sesion-41-evaluacion-de-calidad-en-sistemas-rag" title="Permanent link">&para;</a></h1>
<blockquote>
<p><strong>Módulo</strong>: SESIÓN 4 — <em>Evaluación, seguridad y gobierno de un sistema RAG</em><br />
<strong>Bloque</strong>: 4.1 Evaluación de calidad<br />
<strong>Propósito</strong>: que el alumnado se lleve un <strong>marco de evaluación práctico</strong> para diagnosticar <em>dónde</em> falla un RAG (recuperación vs respuesta) y <em>cómo</em> medirlo de forma repetible.</p>
</blockquote>
<hr />
<h2 id="1-objetivos-de-aprendizaje">1) Objetivos de aprendizaje<a class="headerlink" href="#1-objetivos-de-aprendizaje" title="Permanent link">&para;</a></h2>
<p>Al finalizar este bloque, el participante será capaz de:</p>
<ol>
<li>Diferenciar con claridad:</li>
<li><strong>Evaluación de recuperación (retrieval)</strong> vs</li>
<li><strong>Evaluación de respuesta (generation)</strong>.</li>
<li>Definir y aplicar métricas clave:</li>
<li><strong>Precision / Recall</strong></li>
<li><strong>Relevancia</strong></li>
<li><strong>Groundedness</strong> (respuesta sustentada en evidencias)</li>
<li><strong>Abstención adecuada</strong> (cuándo NO responder).</li>
<li>Diseñar un <strong>dataset de prueba (test set)</strong> con cobertura realista (preguntas fáciles/difíciles, ambigüedad, fuera de alcance).</li>
<li>Conectar síntomas observables (citaciones malas, respuestas incompletas, etc.) con causas probables (chunking, scope, permisos, etc.).</li>
</ol>
<hr />
<h2 id="2-la-idea-clave-evaluar-dos-sistemas-no-uno">2) La idea clave: evaluar <strong>dos sistemas</strong>, no uno<a class="headerlink" href="#2-la-idea-clave-evaluar-dos-sistemas-no-uno" title="Permanent link">&para;</a></h2>
<p>Un RAG en producción es (simplificando) dos sistemas en cadena:</p>
<div class="highlight"><pre><span></span><code>flowchart LR
  Q[Pregunta] --&gt; R[Recuperación]
  R --&gt; C[Contexto recuperado]
  C --&gt; G[Generación de respuesta]
  G --&gt; A[Respuesta + citaciones]
</code></pre></div>
<p>Si el usuario se queja de “el bot responde mal”, pueden pasar <em>dos cosas muy distintas</em>:</p>
<ul>
<li>
<p><strong>Fallo de recuperación</strong>: el contexto recuperado es incorrecto/incompleto.<br />
  → Aunque el LLM “genere bien”, no hay buena materia prima.</p>
</li>
<li>
<p><strong>Fallo de respuesta</strong>: el contexto era bueno, pero el LLM:</p>
</li>
<li>no lo usa,</li>
<li>lo sintetiza mal,</li>
<li>añade contenido no sustentado,</li>
<li>no abstiene.</li>
</ul>
<blockquote>
<p><strong>Diagnóstico rápido</strong>: mira primero las citaciones/fragmentos recuperados. Si están mal, no sigas evaluando “la redacción”.</p>
</blockquote>
<hr />
<h2 id="3-evaluacion-de-recuperacion-retrieval">3) Evaluación de recuperación (retrieval)<a class="headerlink" href="#3-evaluacion-de-recuperacion-retrieval" title="Permanent link">&para;</a></h2>
<h3 id="31-que-significa-recuperar-bien">3.1 ¿Qué significa “recuperar bien”?<a class="headerlink" href="#31-que-significa-recuperar-bien" title="Permanent link">&para;</a></h3>
<p>Para cada pregunta del dataset, queremos que el retriever traiga (idealmente):</p>
<ul>
<li>el <strong>chunk correcto</strong>, o</li>
<li>un conjunto pequeño de chunks donde <strong>está la evidencia</strong>.</li>
</ul>
<p>Aquí aparecen dos niveles de “verdad”:</p>
<p>1) <strong>Ground truth documental</strong>: qué documento/sección contiene la respuesta correcta.<br />
2) <strong>Ground truth de chunk</strong> (más fino): qué fragmentos exactos deberían aparecer en el top‑k.</p>
<hr />
<h3 id="32-metricas-clasicas-adaptadas-a-rag">3.2 Métricas clásicas (adaptadas a RAG)<a class="headerlink" href="#32-metricas-clasicas-adaptadas-a-rag" title="Permanent link">&para;</a></h3>
<blockquote>
<p>En entornos corporativos, la métrica que más se usa es “<strong>¿aparece la evidencia en top‑k?</strong>”, porque el LLM necesita evidencia.</p>
</blockquote>
<h4 id="a-precisionk">A) Precision@k<a class="headerlink" href="#a-precisionk" title="Permanent link">&para;</a></h4>
<p>De los k resultados recuperados, ¿cuántos son relevantes?</p>
<ul>
<li><strong>Precision@k = (# relevantes en top‑k) / k</strong></li>
</ul>
<p>Interpretación:
- alta precision@k → poco ruido (mejor para groundedness).
- baja precision@k → el LLM recibe ruido y puede inventar.</p>
<h4 id="b-recallk">B) Recall@k<a class="headerlink" href="#b-recallk" title="Permanent link">&para;</a></h4>
<p>De todos los documentos/fragmentos relevantes, ¿cuántos aparecen en top‑k?</p>
<ul>
<li><strong>Recall@k = (# relevantes en top‑k) / (# relevantes totales)</strong></li>
</ul>
<p>Interpretación:
- alto recall@k → el sistema suele encontrar la evidencia.
- bajo recall@k → el sistema “no encuentra lo que debe”.</p>
<h4 id="c-hitratek-muy-practica">C) Hit‑rate@k (muy práctica)<a class="headerlink" href="#c-hitratek-muy-practica" title="Permanent link">&para;</a></h4>
<p>¿Está <em>al menos un</em> fragmento relevante en top‑k?</p>
<ul>
<li><strong>Hit‑rate@k = 1 si hay ≥1 relevante en top‑k, si no 0</strong>  </li>
<li>Se reporta como promedio: “% de preguntas con evidencia”.</li>
</ul>
<h4 id="d-mrr-mean-reciprocal-rank">D) MRR (Mean Reciprocal Rank)<a class="headerlink" href="#d-mrr-mean-reciprocal-rank" title="Permanent link">&para;</a></h4>
<p>Premia que el primer resultado relevante aparezca pronto:</p>
<ul>
<li>Para cada pregunta: <strong>RR = 1 / (posición del primer relevante)</strong>  </li>
<li><strong>MRR = promedio de RR</strong></li>
</ul>
<p>Interpretación:
- útil cuando el LLM usa poco contexto o limitas k.</p>
<hr />
<h3 id="33-que-necesitas-para-medir-retrieval">3.3 Qué necesitas para medir retrieval<a class="headerlink" href="#33-que-necesitas-para-medir-retrieval" title="Permanent link">&para;</a></h3>
<p>Para medir retrieval de verdad, necesitas:</p>
<ul>
<li>Pregunta <strong>Q</strong></li>
<li>Lista de <strong>chunks relevantes</strong> (o doc/sections relevantes)</li>
<li>Resultado de retrieval <strong>top‑k</strong></li>
<li>Etiquetado: relevante / no relevante</li>
</ul>
<p><strong>Plantilla de etiquetado (simple)</strong></p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Pregunta</th>
<th>Doc/Sección “verdad”</th>
<th>Chunk(s) relevantes</th>
<th style="text-align: right;">k</th>
<th>¿Aparece evidencia?</th>
</tr>
</thead>
<tbody>
<tr>
<td>R1</td>
<td>…</td>
<td>POL‑RRHH‑07 §3</td>
<td>chunk_12, chunk_13</td>
<td style="text-align: right;">5</td>
<td>Sí/No</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="34-patrones-de-fallo-retrieval">3.4 Patrones de fallo (retrieval)<a class="headerlink" href="#34-patrones-de-fallo-retrieval" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>No encuentra nada relevante</strong> (hit‑rate bajo)</li>
<li>scope demasiado amplio o demasiado estrecho</li>
<li>chunking malo</li>
<li>query rewriting pobre</li>
<li>permisos/ACL: el usuario “no puede ver” la evidencia</li>
<li><strong>Trae cosas “parecidas” pero no correctas</strong> (precision baja)</li>
<li>embeddings dominan demasiado (vector‑only)</li>
<li>falta búsqueda híbrida</li>
<li>metadatos insuficientes (filtrado por país/versión)</li>
<li><strong>Trae duplicados</strong> (mucha redundancia)</li>
<li>overlap alto</li>
<li>duplicidad documental (múltiples versiones o copias)</li>
</ul>
<hr />
<h2 id="4-evaluacion-de-respuesta-generation">4) Evaluación de respuesta (generation)<a class="headerlink" href="#4-evaluacion-de-respuesta-generation" title="Permanent link">&para;</a></h2>
<p>La respuesta puede fallar aunque retrieval sea correcto.</p>
<h3 id="41-criterios-de-calidad-que-necesitas-mirar">4.1 Criterios de calidad que necesitas mirar<a class="headerlink" href="#41-criterios-de-calidad-que-necesitas-mirar" title="Permanent link">&para;</a></h3>
<p>En Copilot Studio, el método “General quality” evalúa (a alto nivel) criterios muy alineados con RAG: <strong>relevance, groundedness, completeness, abstention</strong>.<br />
Esto es un buen resumen de lo que deberías evaluar, incluso fuera de Copilot Studio.</p>
<h4 id="a-relevancia">A) Relevancia<a class="headerlink" href="#a-relevancia" title="Permanent link">&para;</a></h4>
<ul>
<li>¿La respuesta contesta la pregunta?</li>
<li>¿Se mantiene en el tema?</li>
<li>¿Evita divagar?</li>
</ul>
<h4 id="b-groundedness-fundamentacion">B) Groundedness (fundamentación)<a class="headerlink" href="#b-groundedness-fundamentacion" title="Permanent link">&para;</a></h4>
<ul>
<li>¿Lo que afirma está soportado por el contexto recuperado?</li>
<li>¿Incluye afirmaciones “nuevas” que no aparecen en fuentes?</li>
</ul>
<blockquote>
<p>En RAG corporativo, groundedness es “no inventar” y “apoyarse en evidencia”.</p>
</blockquote>
<h4 id="c-completitud">C) Completitud<a class="headerlink" href="#c-completitud" title="Permanent link">&para;</a></h4>
<ul>
<li>¿Cubre todos los puntos relevantes?</li>
<li>¿Incluye excepciones importantes?</li>
</ul>
<h4 id="d-abstencion-adecuada">D) Abstención adecuada<a class="headerlink" href="#d-abstencion-adecuada" title="Permanent link">&para;</a></h4>
<ul>
<li>¿Sabe decir “no tengo evidencia”?</li>
<li>¿Hace preguntas de aclaración cuando falta información?</li>
<li>¿Evita responder con seguridad cuando no debe?</li>
</ul>
<hr />
<h3 id="42-como-medir-groundedness-de-forma-practica-sin-ciencia-ficcion">4.2 Cómo medir groundedness de forma práctica (sin ciencia ficción)<a class="headerlink" href="#42-como-medir-groundedness-de-forma-practica-sin-ciencia-ficcion" title="Permanent link">&para;</a></h3>
<p>Una forma operacional de evaluar groundedness:</p>
<p>1) Divide la respuesta en afirmaciones (frases).
2) Para cada afirmación, decide:
   - <strong>Soportada</strong> por evidencia (sí/no)
3) Calcula:</p>
<ul>
<li><strong>Groundedness = (# afirmaciones soportadas) / (# afirmaciones totales)</strong></li>
</ul>
<p><strong>Ejemplo</strong></p>
<p>Respuesta (3 afirmaciones):
1) “Tienes 22 días laborables.” → soportada ✅
2) “En Portugal son 25.” → no soportada ❌ (fuera del documento)
3) “Debes solicitarlo con 10 días.” → soportada ✅</p>
<p>Groundedness = 2/3 = 0,67</p>
<hr />
<h3 id="43-que-necesitas-para-medir-respuesta">4.3 Qué necesitas para medir respuesta<a class="headerlink" href="#43-que-necesitas-para-medir-respuesta" title="Permanent link">&para;</a></h3>
<p>Tienes dos caminos (pueden convivir):</p>
<p><strong>A) Expected answer (respuesta esperada)</strong><br />
- Ideal para:
  - preguntas con respuesta “concreta”
  - respuestas cortas (códigos, números, definiciones)</p>
<p><strong>B) Rubric (rúbrica de evaluación)</strong><br />
- Ideal para:
  - preguntas abiertas
  - respuestas con varios formatos válidos
  - evaluación de groundedness y abstención</p>
<p><strong>Mini‑rúbrica sugerida (0–2 por criterio)</strong></p>
<table>
<thead>
<tr>
<th>Criterio</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>Relevancia</td>
<td>No responde</td>
<td>Responde parcial</td>
<td>Responde directo</td>
</tr>
<tr>
<td>Groundedness</td>
<td>Inventos claros</td>
<td>Alguna suposición</td>
<td>Todo sustentado</td>
</tr>
<tr>
<td>Completitud</td>
<td>Falta lo esencial</td>
<td>Falta algún matiz</td>
<td>Completa</td>
</tr>
<tr>
<td>Abstención</td>
<td>Responde sin evidencia</td>
<td>Duda poco</td>
<td>Abste/aclára</td>
</tr>
</tbody>
</table>
<p>Total (0–8).</p>
<hr />
<h2 id="5-importancia-de-datasets-de-prueba-test-sets">5) Importancia de datasets de prueba (test sets)<a class="headerlink" href="#5-importancia-de-datasets-de-prueba-test-sets" title="Permanent link">&para;</a></h2>
<h3 id="51-por-que-un-dataset-cambia-el-juego">5.1 Por qué un “dataset” cambia el juego<a class="headerlink" href="#51-por-que-un-dataset-cambia-el-juego" title="Permanent link">&para;</a></h3>
<p>Sin dataset:
- “probamos 3 preguntas” y creemos que está bien.
- no se detectan regresiones al cambiar fuentes o prompts.</p>
<p>Con dataset:
- puedes medir antes/después,
- detectar mejoras reales,
- comparar configuraciones (A/B),
- identificar gaps.</p>
<hr />
<h3 id="52-que-debe-contener-un-buen-test-set-minimo-viable">5.2 Qué debe contener un buen test set (mínimo viable)<a class="headerlink" href="#52-que-debe-contener-un-buen-test-set-minimo-viable" title="Permanent link">&para;</a></h3>
<p>Recomendación para empezar:
- 30–50 preguntas para un caso de uso.
- 5 categorías (mezcladas):</p>
<p>1) <strong>Directas</strong> (respuesta literal en el documento)
2) <strong>Paráfrasis</strong> (sinónimos)
3) <strong>Exact match</strong> (códigos, números)
4) <strong>Ambiguas</strong> (deben pedir aclaración)
5) <strong>Fuera de alcance</strong> (deben abstener)</p>
<hr />
<h3 id="53-como-mantener-el-dataset-operacion-real">5.3 Cómo mantener el dataset (operación real)<a class="headerlink" href="#53-como-mantener-el-dataset-operacion-real" title="Permanent link">&para;</a></h3>
<ul>
<li>Versiona el dataset (v1, v2…)</li>
<li>Marca preguntas que dependen de documentos/versiones</li>
<li>Cuando cambie una política, actualiza:</li>
<li>la fuente (doc)</li>
<li>el expected/rubric</li>
<li>la etiqueta de versión</li>
</ul>
<hr />
<h2 id="6-miniejercicio-5-min">6) Mini‑ejercicio (5 min)<a class="headerlink" href="#6-miniejercicio-5-min" title="Permanent link">&para;</a></h2>
<h3 id="consigna">Consigna<a class="headerlink" href="#consigna" title="Permanent link">&para;</a></h3>
<p>En parejas, construid 10 test cases para un asistente de “Política de viajes”.</p>
<p>Incluid:
- 4 directas
- 2 paráfrasis
- 2 exact match (si hay importes)
- 1 ambigua
- 1 fuera de alcance</p>
<h3 id="plantilla">Plantilla<a class="headerlink" href="#plantilla" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>ID</th>
<th>Pregunta</th>
<th>Tipo</th>
<th>Evidencia esperada (doc/sección)</th>
<th>¿Debe abstener?</th>
</tr>
</thead>
<tbody>
<tr>
<td>T1</td>
<td>…</td>
<td>directa</td>
<td>…</td>
<td>No</td>
</tr>
<tr>
<td>T2</td>
<td>…</td>
<td>ambigua</td>
<td>…</td>
<td>Sí (pedir dato)</td>
</tr>
<tr>
<td>T3</td>
<td>…</td>
<td>fuera alcance</td>
<td>—</td>
<td>Sí</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="7-notas-del-instructor">7) Notas del instructor<a class="headerlink" href="#7-notas-del-instructor" title="Permanent link">&para;</a></h2>
<ul>
<li>Repite este mensaje: <strong>“Evalúa primero retrieval, luego respuesta.”</strong></li>
<li>Introduce el concepto de “<strong>evidencia</strong>” como requisito (citaciones).</li>
<li>Evita convertir la evaluación en “opiniones”. Usa rúbricas y test sets.</li>
</ul>
<hr />
<h2 id="8-lectura-opcional-oficial">8) Lectura opcional (oficial)<a class="headerlink" href="#8-lectura-opcional-oficial" title="Permanent link">&para;</a></h2>
<blockquote>
<p>URLs en bloque de código para fácil acceso.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>Copilot Studio — About agent evaluation:
https://learn.microsoft.com/en-us/microsoft-copilot-studio/analytics-agent-evaluation-intro

Copilot Studio — Choose evaluation methods (relevance/groundedness/completeness/abstention):
https://learn.microsoft.com/en-us/microsoft-copilot-studio/analytics-agent-evaluation-overview
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.expand", "navigation.sections", "navigation.tabs", "navigation.path", "search.highlight", "search.suggest"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>